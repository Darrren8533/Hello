<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAMS Owner - Services Data Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-md transform -translate-x-full transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0">
            <div class="p-4">
                <h1 class="text-2xl font-bold text-gray-800">CAMS Owner</h1>
            </div>
            <nav class="mt-6">
                <a href="Home.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Dashboard</a>
                <a href="bookingDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Bookings</a>
                <a href="customerDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Customers</a>
                <a href="moderatorDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Admins/Moderators</a>
                <a href="financialSummary.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Finances</a>
                <a href="serviceAnalysis.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Services</a>
                <a href="communicationHub.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Communication</a>
                <a href="auditTrail.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Audit Logs</a>
                <a href="dynamicPricing.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Dynamic Pricing</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
            <div class="container mx-auto px-6 py-8">
                <div class="flex items-center justify-between mb-4">
                    <button id="sidebarToggle" class="text-gray-500 focus:outline-none lg:hidden">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 6H20M4 12H20M4 18H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <h1 class="text-2xl font-bold">Services Data Analysis</h1>
                </div>
                
                <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3 mb-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h2 class="text-lg font-semibold mb-2">Total Bookings</h2>
                        <p class="text-3xl font-bold" id="totalBookings">1,234</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h2 class="text-lg font-semibold mb-2">Average Customer Rating</h2>
                        <p class="text-3xl font-bold" id="averageRating">4.7</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h2 class="text-lg font-semibold mb-2">Service Efficiency</h2>
                        <p class="text-3xl font-bold" id="serviceEfficiency">92%</p>
                    </div>
                </div>

                <div class="grid gap-4 md:grid-cols-2 mb-4">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h2 class="text-lg font-semibold mb-4">Room Bookings by Type</h2>
                        <canvas id="roomBookingsChart"></canvas>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h2 class="text-lg font-semibold mb-4">Customer Satisfaction Trends</h2>
                        <canvas id="satisfactionTrendChart"></canvas>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow mb-4">
                    <h2 class="text-lg font-semibold mb-4">Top Performing Services</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usage</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rating</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Revenue</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="topServicesBody">
                                <!-- Top services will be dynamically inserted here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-4">Areas for Improvement</h2>
                    <ul id="improvementList" class="list-disc pl-5 space-y-2">
                        <!-- Areas for improvement will be dynamically inserted here -->
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Simulated data
        const roomBookings = {
            labels: ['Standard', 'Deluxe', 'Suite', 'Family'],
            data: [300, 450, 200, 284]
        };

        const satisfactionTrend = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            data: [4.2, 4.3, 4.5, 4.6, 4.7, 4.7]
        };

        const topServices = [
            { name: "Room Service", usage: "78%", rating: 4.8, revenue: "$25,000" },
            { name: "Spa", usage: "65%", rating: 4.9, revenue: "$18,000" },
            { name: "Restaurant", usage: "82%", rating: 4.7, revenue: "$30,000" },
            { name: "Gym", usage: "45%", rating: 4.6, revenue: "$10,000" },
            { name: "Concierge", usage: "70%", rating: 4.8, revenue: "$5,000" }
        ];

        const areasForImprovement = [
            "Reduce check-in waiting time during peak hours",
            "Improve Wi-Fi connectivity in certain areas",
            "Enhance variety in breakfast menu",
            "Increase availability of parking spaces",
            "Upgrade in-room entertainment systems"
        ];

        // Function to render room bookings chart
        function renderRoomBookingsChart() {
            const ctx = document.getElementById('roomBookingsChart').getContext('2d');
            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: roomBookings.labels,
                    datasets: [{
                        data: roomBookings.data,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(75, 192, 192, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: true,
                            text: 'Room Bookings by Type'
                        }
                    }
                }
            });
        }

        // Function to render customer satisfaction trend chart
        function renderSatisfactionTrendChart() {
            const ctx = document.getElementById('satisfactionTrendChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: satisfactionTrend.labels,
                    datasets: [{
                        label: 'Customer Satisfaction',
                        data: satisfactionTrend.data,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 3,
                            max: 5
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        title: {
                            display: true,
                            text: 'Customer Satisfaction Trend'
                        }
                    }
                }
            });
        }

        // Function to render top services table
        function renderTopServices() {
            const tableBody = document.getElementById('topServicesBody');
            tableBody.innerHTML = '';
            topServices.forEach(service => {
                const row = `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">${service.name}</td>
                        <td class="px-6 py-4 whitespace-nowrap">${service.usage}</td>
                        <td class="px-6 py-4 whitespace-nowrap">${service.rating}</td>
                        <td class="px-6 py-4 whitespace-nowrap">${service.revenue}</td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // Function to render areas for improvement
        function renderAreasForImprovement() {
            const list = document.getElementById('improvementList');
            areasForImprovement.forEach(area => {
                const listItem = document.createElement('li');
                listItem.textContent = area;
                list.appendChild(listItem);
            });
        }

        // Initialize charts and data
        document.addEventListener('DOMContentLoaded', () => {
            renderRoomBookingsChart();
            renderSatisfactionTrendChart();
            renderTopServices();
            renderAreasForImprovement();
        });

        // Simulated real-time updates
        setInterval(() => {
            // Update total bookings
            const totalBookings = document.getElementById('totalBookings');
            let currentBookings = parseInt(totalBookings.textContent.replace(',', ''));
            currentBookings += Math.floor(Math.random() * 10);
            totalBookings.textContent = currentBookings.toLocaleString();

            // Update average rating
            const averageRating = document.getElementById('averageRating');
            let currentRating = parseFloat(averageRating.textContent);
            currentRating += (Math.random() - 0.5) * 0.1;
            averageRating.textContent = currentRating.toFixed(1);

            // Update service efficiency
            const serviceEfficiency = document.getElementById('serviceEfficiency');
            let currentEfficiency = parseInt(serviceEfficiency.textContent);
            currentEfficiency += Math.floor((Math.random() - 0.5) * 5);
            currentEfficiency = Math.min(100, Math.max(0, currentEfficiency));
            serviceEfficiency.textContent = currentEfficiency + '%';
        }, 5000); // Update every 5 seconds

        // Sidebar toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            let isSidebarOpen = false;

            function toggleSidebar() {
                isSidebarOpen = !isSidebarOpen;
                sidebar.classList.toggle('-translate-x-full', !isSidebarOpen);
            }

            sidebarToggle.addEventListener('click', toggleSidebar);

            document.addEventListener('click', function(event) {
                const isClickInsideSidebar = sidebar.contains(event.target);
                const isClickOnToggle = sidebarToggle.contains(event.target);

                if (isSidebarOpen && !isClickInsideSidebar && !isClickOnToggle) {
                    toggleSidebar();
                }
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 1024 && isSidebarOpen) {
                    toggleSidebar();
                }
            });
        });
    </script>
</body>
</html>