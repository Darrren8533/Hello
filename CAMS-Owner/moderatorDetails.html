<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAMS Owner - Administrator/Moderator Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-md transform -translate-x-full transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0">
            <div class="p-4">
                <h1 class="text-2xl font-bold text-gray-800">CAMS Owner</h1>
            </div>
            <nav class="mt-6">
                <a href="Home.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Dashboard</a>
                <a href="bookingDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Bookings</a>
                <a href="customerDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Customers</a>
                <a href="moderatorDetails.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Admins/Moderators</a>
                <a href="financialSummary.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Finances</a>
                <a href="serviceAnalysis.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Services</a>
                <a href="communicationHub.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Communication</a>
                <a href="auditTrail.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Audit Logs</a>
                <a href="dynamicPricing.html" class="block px-4 py-2 text-gray-600 hover:bg-gray-100">Dynamic Pricing</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100">
            <div class="container mx-auto px-6 py-8">
                <div class="flex items-center justify-between mb-4">
                    <button id="sidebarToggle" class="text-gray-500 focus:outline-none lg:hidden">
                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 6H20M4 12H20M4 18H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <h1 class="text-2xl font-bold">Administrator/Moderator Details</h1>
                </div>

                <!-- Filters -->
                <div class="bg-white p-4 rounded-lg shadow mb-6">
                    <h2 class="text-lg font-semibold mb-4">Filters</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="roleFilter" class="block text-sm font-medium text-gray-700">Role</label>
                            <select id="roleFilter" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">All Roles</option>
                                <option value="admin">Administrator</option>
                                <option value="moderator">Moderator</option>
                            </select>
                        </div>
                        <div>
                            <label for="activityFilter" class="block text-sm font-medium text-gray-700">Activity Level</label>
                            <select id="activityFilter" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">All Activity Levels</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                        <div>
                            <label for="performanceFilter" class="block text-sm font-medium text-gray-700">Performance</label>
                            <select id="performanceFilter" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option value="">All Performance Levels</option>
                                <option value="excellent">Excellent</option>
                                <option value="good">Good</option>
                                <option value="average">Average</option>
                                <option value="poor">Poor</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button onclick="applyFilters()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                            Apply Filters
                        </button>
                    </div>
                </div>

                <!-- Admin/Moderator List -->
                <div class="bg-white p-4 rounded-lg shadow overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Name
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Role
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Contact
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Activity
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Performance
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    Actions
                                </th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="adminModeratorList">
                            <!-- Admin/Moderator entries will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for editing permissions -->
    <div id="permissionModal" class="fixed z-10 inset-0 overflow-y-auto hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                        Edit Permissions
                    </h3>
                    <div class="mt-2">
                        <p class="text-sm text-gray-500">
                            Adjust permissions for <span id="modalUserName"></span>
                        </p>
                        <div class="mt-4">
                            <div class="flex items-start">
                                <div class="flex items-center h-5">
                                    <input id="permissionBookings" name="permissions" type="checkbox" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                </div>
                                <div class="ml-3 text-sm">
                                    <label for="permissionBookings" class="font-medium text-gray-700">Manage Bookings</label>
                                </div>
                            </div>
                            <div class="flex items-start mt-2">
                                <div class="flex items-center h-5">
                                    <input id="permissionCustomers" name="permissions" type="checkbox" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                </div>
                                <div class="ml-3 text-sm">
                                    <label for="permissionCustomers" class="font-medium text-gray-700">Manage Customers</label>
                                </div>
                            </div>
                            <div class="flex items-start mt-2">
                                <div class="flex items-center h-5">
                                    <input id="permissionReports" name="permissions" type="checkbox" class="focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded">
                                </div>
                                <div class="ml-3 text-sm">
                                    <label for="permissionReports" class="font-medium text-gray-700">Generate Reports</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm" onclick="savePermissions()">
                        Save Changes
                    </button>
                    <button type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm" onclick="closePermissionModal()">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulated admin/moderator data
        const adminModerators = [
            { id: 1, name: "John Doe", role: "admin", email: "john@example.com", phone: "123-456-7890", activity: "high", performance: "excellent" },
            { id: 2, name: "Jane Smith", role: "moderator", email: "jane@example.com", phone: "234-567-8901", activity: "medium", performance: "good" },
            { id: 3, name: "Alice Johnson", role: "admin", email: "alice@example.com", phone: "345-678-9012", activity: "high", performance: "excellent" },
            { id: 4, name: "Bob Williams", role: "moderator", email: "bob@example.com", phone: "456-789-0123", activity: "low", performance: "average" },
            { id: 5, name: "Charlie Brown", role: "moderator", email: "charlie@example.com", phone: "567-890-1234", activity: "medium", performance: "good" }
        ];

        // Function to render admin/moderator list
        function renderAdminModeratorList(list) {
            const tableBody = document.getElementById('adminModeratorList');
            tableBody.innerHTML = '';
            list.forEach(person => {
                const row = `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm font-medium text-gray-900">${person.name}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${person.role === 'admin' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                                ${person.role}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${person.email}</div>
                            <div class="text-sm text-gray-500">${person.phone}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${person.activity}</div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="text-sm text-gray-900">${person.performance}</div>
                        </td>
                        <td  class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button onclick="openPermissionModal(${person.id})" class="text-indigo-600 hover:text-indigo-900">Edit Permissions</button>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }

        // Function to apply filters
        function applyFilters() {
            const roleFilter = document.getElementById('roleFilter').value;
            const activityFilter = document.getElementById('activityFilter').value;
            const performanceFilter = document.getElementById('performanceFilter').value;

            let filteredList = adminModerators;

            if (roleFilter) {
                filteredList = filteredList.filter(person => person.role === roleFilter);
            }

            if (activityFilter) {
                filteredList = filteredList.filter(person => person.activity === activityFilter);
            }

            if (performanceFilter) {
                filteredList = filteredList.filter(person => person.performance === performanceFilter);
            }

            renderAdminModeratorList(filteredList);
        }

        // Function to open permission modal
        function openPermissionModal(userId) {
            const user = adminModerators.find(person => person.id === userId);
            document.getElementById('modalUserName').textContent = user.name;
            document.getElementById('permissionModal').classList.remove('hidden');
            // In a real application, you would fetch and set the current permissions here
        }

        // Function to close permission modal
        function closePermissionModal() {
            document.getElementById('permissionModal').classList.add('hidden');
        }

        // Function to save permissions
        function savePermissions() {
            // In a real application, you would save the permissions to the server here
            alert('Permissions saved successfully!');
            closePermissionModal();
        }

        // Sidebar toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            let isSidebarOpen = false;

            function toggleSidebar() {
                isSidebarOpen = !isSidebarOpen;
                sidebar.classList.toggle('-translate-x-full', !isSidebarOpen);
            }

            sidebarToggle.addEventListener('click', toggleSidebar);

            document.addEventListener('click', function(event) {
                const isClickInsideSidebar = sidebar.contains(event.target);
                const isClickOnToggle = sidebarToggle.contains(event.target);

                if (isSidebarOpen && !isClickInsideSidebar && !isClickOnToggle) {
                    toggleSidebar();
                }
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth >= 1024 && isSidebarOpen) {
                    toggleSidebar();
                }
            });

            // Initial render of admin/moderator list
            renderAdminModeratorList(adminModerators);
        });
    </script>
</body>
</html>